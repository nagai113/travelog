/*
  *     loopedSlider 0.5.6 - jQuery plugin
  *    written by Nathan Searles    
  *    http://nathansearles.com/loopedslider/
  *
  *    Copyright (c) 2009 Nathan Searles (http://nathansearles.com/)
  *    Dual licensed under the MIT (MIT-LICENSE.txt)
  *    and GPL (GPL-LICENSE.txt) licenses.
  *
  *    Built for jQuery library
  *    http://jquery.com
  *    Compatible with jQuery 1.3.2+
  *
  */
 
 /*
  *    markup example for $("#loopedSlider").loopedSlider();
  *
  *    <div id="loopedSlider">    
  *        <div class="container">
  *            <div class="slides">
  *                <div><img src="01.jpg" alt="" /></div>
  *                <div><img src="02.jpg" alt="" /></div>
  *                <div><img src="03.jpg" alt="" /></div>
  *                <div><img src="04.jpg" alt="" /></div>
  *            </div>
  *        </div>
  *        <a href="#" class="previous">previous</a>
  *        <a href="#" class="next">next</a>    
  *    </div>
  *
 */
if(typeof jQuery!="undefined"){jQuery(function(a){a.fn.extend({loopedSlider:function(b){var c=a.extend({},a.fn.loopedSlider.defaults,b);return this.each(function(){if(a.fn.jquery<"1.3.2"){return}var m=a(this);var j=a.metadata?a.extend({},c,m.metadata()):c;var d=0;var e=1;var f=a(j.slides,m).children().size();var h=a(j.slides,m).children().outerWidth();var n=0;var k=false;var l=0;var i=0;var u=0;var t=a("."+j.pagination+" li a",m);if(j.addPagination&&!a(t).length){var q=f;a(m).append("<ul class="+j.pagination+">");a(j.slides,m).children().each(function(){if(l<q){a("."+j.pagination,m).append("<li><a rel="+(l+1)+' href="#" >'+(l+1)+"</a></li>");l=l+1}else{l=0;return false}a("."+j.pagination+" li a:eq(0)",m).parent().addClass("active")});t=a("."+j.pagination+" li a",m)}else{a(t,m).each(function(){l=l+1;a(this).attr("rel",l);a(t.eq(0),m).parent().addClass("active")})}if(f===1){a(j.slides,m).children().css({position:"absolute",left:n,display:"block"});return}a(j.slides,m).css({width:(f*h)});a(j.slides,m).children().each(function(){a(this).css({position:"absolute",left:n,display:"block"});n=n+h});a(j.slides,m).children(":eq("+(f-1)+")").css({position:"absolute",left:-h});if(f>3){a(j.slides,m).children(":eq("+(f-1)+")").css({position:"absolute",left:-h})}if(j.autoHeight){s(e)}a(".next",m).click(function(){if(k===false){g("next",true);if(j.autoStart){if(j.restart){r()}else{clearInterval(sliderIntervalID)}}}return false});a(".previous",m).click(function(){if(k===false){g("prev",true);if(j.autoStart){if(j.restart){r()}else{clearInterval(sliderIntervalID)}}}return false});if(j.containerClick){a(j.container,m).click(function(){if(k===false){g("next",true);if(j.autoStart){if(j.restart){r()}else{clearInterval(sliderIntervalID)}}}return false})}a(t,m).click(function(){if(a(this).parent().hasClass("active")){return false}else{e=a(this).attr("rel");a(t,m).parent().siblings().removeClass("active");a(this).parent().addClass("active");g("fade",e);if(j.autoStart){if(j.restart){r()}else{clearInterval(sliderIntervalID)}}}return false});if(j.autoStart){sliderIntervalID=setInterval(function(){if(k===false){g("next",true)}},j.autoStart);function r(){if(j.restart){clearInterval(sliderIntervalID,i);clearTimeout(u);u=setTimeout(function(){i=setInterval(function(){g("next",true)},j.autoStart)},j.restart)}else{sliderIntervalID=setInterval(function(){if(k===false){g("next",true)}},j.autoStart)}}}function p(o){if(o===f+1){o=1}if(o===0){o=f}a(t,m).parent().siblings().removeClass("active");a(t,m).parent().find("[rel='"+(o)+"']",m).parent().addClass("active")}function s(v){if(v===f+1){v=1}if(v===0){v=f}var o=a(j.slides,m).children(":eq("+(v-1)+")",m).outerHeight();a(j.container,m).animate({height:o},j.autoHeight)}function g(o,v){k=true;switch(o){case"next":e=e+1;d=(-(e*h-h));p(e);if(j.autoHeight){s(e)}if(f<3){if(e===3){a(j.slides,m).children(":eq(0)").css({left:(f*h)})}if(e===2){a(j.slides,m).children(":eq("+(f-1)+")").css({position:"absolute",left:h})}}a(j.slides,m).animate({left:d},j.slidespeed,function(){if(e===f+1){e=1;a(j.slides,m).css({left:0},function(){a(j.slides,m).animate({left:d})});a(j.slides,m).children(":eq(0)").css({left:0});a(j.slides,m).children(":eq("+(f-1)+")").css({position:"absolute",left:-h})}if(e===f){a(j.slides,m).children(":eq(0)").css({left:(f*h)})}if(e===f-1){a(j.slides,m).children(":eq("+(f-1)+")").css({left:(f*h-h)})}k=false});break;case"prev":e=e-1;d=(-(e*h-h));p(e);if(j.autoHeight){s(e)}if(f<3){if(e===0){a(j.slides,m).children(":eq("+(f-1)+")").css({position:"absolute",left:(-h)})}if(e===1){a(j.slides,m).children(":eq(0)").css({position:"absolute",left:0})}}a(j.slides,m).animate({left:d},j.slidespeed,function(){if(e===0){e=f;a(j.slides,m).children(":eq("+(f-1)+")").css({position:"absolute",left:(f*h-h)});a(j.slides,m).css({left:-(f*h-h)});a(j.slides,m).children(":eq(0)").css({left:(f*h)})}if(e===2){a(j.slides,m).children(":eq(0)").css({position:"absolute",left:0})}if(e===1){a(j.slides,m).children(":eq("+(f-1)+")").css({position:"absolute",left:-h})}k=false});break;case"fade":e=[e]*1;d=(-(e*h-h));p(e);if(j.autoHeight){s(e)}a(j.slides,m).children().fadeOut(j.fadespeed,function(){a(j.slides,m).css({left:d});a(j.slides,m).children(":eq("+(f-1)+")").css({left:f*h-h});a(j.slides,m).children(":eq(0)").css({left:0});if(e===f){a(j.slides,m).children(":eq(0)").css({left:(f*h)})}if(e===1){a(j.slides,m).children(":eq("+(f-1)+")").css({position:"absolute",left:-h})}a(j.slides,m).children().fadeIn(j.fadespeed);k=false});break;default:break}}})}});a.fn.loopedSlider.defaults={container:".container",slides:".slides",pagination:"pagination",containerClick:false,autoStart:0,restart:0,slidespeed:1300,fadespeed:800,autoHeight:0,addPagination:false}})};